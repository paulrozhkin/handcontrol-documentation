# API для управления протезом
Для управления протезом используется Bluetooth интерфейс с самописным протоколом и Ethernet интерфейс с протоколом MQTT. Payload для протоколов общий и представляе собой данные в бинарном формате. Дальнейшее описание будет представлять из себя описание API в виде таблицы и общий раздел Payload для представление бинарного формата.

## API
В тиблцев приведено описание API протеза со следующими полями:
* Name - название предоставляемой команды
* MQTT Topic - MQTT топик, который используется для команды
* MQTT Write - может ли кто-либо, кроме протеза (и эмулятора) отправлять сообщения в этот топик
* Bluetooth - идентификатор команды Data link bluetooth протокола, который должнен быть положен в поле id команды
* Payload - идентификатор полезной нагрузки (см. раздел Payload)
* Description - описание команды

|Name|MQTT Topic|MQTT Write|Bluetooth|Payload|Description|
|---|---|---|---|---|---|
|SetOnline|controllers/online|-|X|Online|Каждый протез отправляет свои данные в этот топик (id и доп.инфо) каждые 30 секунд для определения того, что он находится в системе и к нему можно получить доступ. Если протез не отправил данные, то можно считать, что он отключен.|
## Payload
### StringFormat
|Field|Size (bytes)|Data Type|Description|
|---|---|---|---|
|Size|4|uint32_t|Размер вложенной строки в UTF-8|
|String|Size|UTF-8|Строка UTF-8|

### Online
|Field|Size (bytes)|Data Type|Description|
|---|---|---|---|
|Id|16|GUID|Уникальный идентификатор протеза в системе|
|Description|?|StringFormat|Дополнительная информация о протезе.|

